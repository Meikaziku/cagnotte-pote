{% extends 'base.html.twig' %}


{% block body %}

	<div class="parallax-container hero-banner valign-wrapper">
		<div class="section no-pad-bot">
			<div class="container">
				<div class="hide-on-med-and-down">
					<h1 class="header center white-text light">Un cadeau commun à organiser?</h1>
					<div class="row center">
						<h5 class="header col s12 light">Anniversaire, pot de départ, crémaillère... N'avancez plus les frais !</h5>
					</div>
				</div>
				<div class="hide-on-large-only">
					<div class="row center">
						<h5 class="header col s12 light">Un cadeau commun à organiser ?</h5>
					</div>
				</div>
				<div class="row">
					<div class="card col s12 m12 l8 offset-l2">
						<div class="card-content">
							<div class="input-field col s12 l8">
								<input id="cag_name" type="text" class="validate">
								<label for="cag_name">Nommez votre nouvelle campagne</label>
							</div>
							<a href="{{ path(name = 'app_campaign_new') }}" class="btn-large waves-effect waves-light pink lighten-1 col s12 l4">Valider</a>
						</div>
					</div>
				</div>
				<br><br>

			</div>
		</div>

		<div class="parallax"><img src="{{ asset('images/11.jpg') }}" alt="Anniversaire, pot de départ, crémaillère... N'avancez plus les frais !"></div>
	</div>

	<div class="container">
		<div class="section">
			<div class="row">
				<div class="col s12 center">
					<h4>Comment ça marche ?</h4>
				</div>
			</div>
			<!--   Icon Section   -->
			<div class="row">
				<div class="col s12 m4">
					<div class="icon-block center">
						<div class="btn-large btn-floating white">
							<i class="material-icons teal-text">create</i>
						</div>
						<h5 class="center">Créez</h5>
						<p class="light">et personnalisez votre campagne commune en 30 secondes !</p>
					</div>
				</div>

				<div class="col s12 m4">
					<div class="icon-block center">
						<div class="btn-large btn-floating white">
							<i class="material-icons teal-text">wc</i>
						</div>
						<h5 class="center">Invitez</h5>
						<p class="light">vos amis en utilisant les réseaux sociaux, mail, etc.</p>
					</div>
				</div>

				<div class="col s12 m4">
					<div class="icon-block center">
						<div class="btn-large btn-floating white">
							<i class="material-icons teal-text">shopping_cart</i>
						</div>
						<h5 class="center">Collectez</h5>
						<p class="light">et utilisez l'argent comme bon vous semble avec vos amis.</p>
					</div>
				</div>
			</div>

		</div>
	</div>

	<div class="parallax-container valign-wrapper">
		<div class="section no-pad-bot">
			<div class="container">
				<div class="row center">
					<h4 class="header col s12 light">Une campagne pensée pour vous<br>et pour toutes les occasions</h4>
				</div>
			</div>
		</div>
		<div class="parallax"><img src="{{ asset('images/10.jpg') }}" alt="Une campagne pensée pour vous"></div>
	</div>

	<div class="container">
		<div class="section">

			<div class="row">
				<div class="col s12 center">
					<h4>les campagnes du moment</h4>
				</div>
			</div>
			<div class="row">
				<div class="col s12">
					<div class="carousel">
						{% for campaign in top_campaigns %}
							<a class="carousel-item" href="{{ path('app_campaign_show', {'id': campaign.id}) }}">
								<div class="card center">
									<div class="card-content">
										<span class="card-title teal-text">{{ campaign.name }}</span>
										<p class="black-text">
											{{ campaign.content|length > 100 ? campaign.content|slice(0, 100) ~ '...' : campaign.content }}
										</p>
									</div>
									<div class="card-action">
										<div class="row black-text">
											<div class="col s6">
												<i class="material-icons teal-text">account_circle</i>
												<b>{{ campaign.participations|length }}</b>
											</div>
											<div class="col s6">
												<i class="material-icons teal-text">euro_symbol</i>
												{% set total = 0 %}
												{% for participation in campaign.participations %}
													{% if participation.payment %}
														{% set total = total + participation.payment.amount %}
													{% endif %}
												{% endfor %}
												<b>{{ total }}
													€</b>
											</div>
										</div>
									</div>
									<div class="progress">
										{% set percentage = campaign.goal > 0 ? (total / campaign.goal * 100)|round : 0 %}
										{% if percentage > 100 %}
											{% set percentage = 100 %}
										{% endif %}
										<div class="determinate" style="width: {{ percentage }}%"></div>
									</div>
								</div>
							</a>
						{% endfor %}
					</div>
				</div>
			</div>

		</div>
	</div>

	<footer class="page-footer teal">
		<div class="container">
			<div class="row">
				<div class="col l6 s12">
					<h5 class="white-text">Cagnot'Potes</h5>
					<p class="grey-text text-lighten-4">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam scelerisque id nunc nec volutpat. Etiam pellentesque tristique arcu, non consequat magna fermentum ac. Cras ut ultricies eros. Maecenas eros justo.</p>
				</div>
				<div class="col l3 s12 offset-l3">
					<h5 class="white-text">Liens</h5>
					<ul class="footer-links">
						<li>
							<a class="white-text" href="#!">Comment ça marche ?</a>
						</li>
						<li>
							<a class="white-text" href="#!">Voir les campagnes</a>
						</li>
						<li>
							<a class="white-text" href="{{ path(name = 'app_campaign_new') }}">Créer une campagne</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="footer-copyright">
			<div class="container">
				fait par Yanis
				<a class="white-text" href="http://trombi.simplon-roanne.com/">Simplon Saint-Etienne</a>
			</div>
		</div>
	</footer>
	<!--JavaScript at end of body for optimized loading-->

	<script type="text/javascript" src=" {{ asset('js/materialize.min.js') }}"></script>
	<!--Init & custom scripts-->
	<script type="text/javascript" src="{{ asset('js/scripts.js') }}"></script>


{% endblock %}
